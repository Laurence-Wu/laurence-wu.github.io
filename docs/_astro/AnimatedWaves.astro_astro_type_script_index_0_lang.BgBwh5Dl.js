class c{x;y;z;constructor(n,e,i){this.x=n,this.y=e,this.z=i}dot2(n,e){return this.x*n+this.y*e}}class I{grad3;p;perm;gradP;constructor(n=0){this.grad3=[new c(1,1,0),new c(-1,1,0),new c(1,-1,0),new c(-1,-1,0),new c(1,0,1),new c(-1,0,1),new c(1,0,-1),new c(-1,0,-1),new c(0,1,1),new c(0,-1,1),new c(0,1,-1),new c(0,-1,-1)],this.p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.perm=new Array(512),this.gradP=new Array(512),this.seed(n)}seed(n){n>0&&n<1&&(n*=65536),n=Math.floor(n),n<256&&(n|=n<<8);for(let e=0;e<256;e++){const i=e&1?this.p[e]^n&255:this.p[e]^n>>8&255;this.perm[e]=this.perm[e+256]=i,this.gradP[e]=this.gradP[e+256]=this.grad3[i%12]}}fade(n){return n*n*n*(n*(n*6-15)+10)}lerp(n,e,i){return(1-i)*n+i*e}perlin2(n,e){let i=Math.floor(n),v=Math.floor(e);n-=i,e-=v,i&=255,v&=255;const x=this.gradP[i+this.perm[v]].dot2(n,e),t=this.gradP[i+this.perm[v+1]].dot2(n,e-1),f=this.gradP[i+1+this.perm[v]].dot2(n-1,e),L=this.gradP[i+1+this.perm[v+1]].dot2(n-1,e-1),p=this.fade(n);return this.lerp(this.lerp(x,f,p),this.lerp(t,L,p),this.fade(e))}}function S(){const G=document.getElementById("waves-container"),n=document.getElementById("waves-canvas");if(!G||!n)return;const e=n.getContext("2d");if(!e)return;let i={width:0,height:0,left:0,top:0};const v=new I(Math.random());let x=[];const t={x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1},f=[{color:"rgba(34, 197, 94, 0.4)",speedX:.0125,speedY:.005,ampX:32,ampY:16,xGap:12,yGap:35},{color:"rgba(59, 130, 246, 0.3)",speedX:.01,speedY:.008,ampX:25,ampY:20,xGap:15,yGap:40},{color:"rgba(251, 191, 36, 0.35)",speedX:.015,speedY:.006,ampX:28,ampY:18,xGap:10,yGap:32}];function L(){const o=G.getBoundingClientRect();i={width:o.width,height:o.height,left:o.left,top:o.top},n.width=o.width,n.height=o.height}function p(){const{width:o,height:a}=i;x=[],f.forEach(r=>{const h=o+200,w=a+30,y=Math.ceil(h/r.xGap),s=Math.ceil(w/r.yGap),d=(o-r.xGap*y)/2,g=(a-r.yGap*s)/2,m=[];for(let u=0;u<=y;u++){const l=[];for(let M=0;M<=s;M++)l.push({x:d+r.xGap*u,y:g+r.yGap*M,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}});m.push(l)}x.push(...m)})}function A(o){let a=0;f.forEach(r=>{const h=Math.ceil((i.width+200)/r.xGap)+1;for(let w=0;w<h&&a<x.length;w++,a++){const y=x[a];y&&y.forEach(s=>{const d=v.perlin2((s.x+o*r.speedX)*.002,(s.y+o*r.speedY)*.0015)*12;s.wave.x=Math.cos(d)*r.ampX,s.wave.y=Math.sin(d)*r.ampY;const g=s.x-t.sx,m=s.y-t.sy,u=Math.hypot(g,m),l=Math.max(175,t.vs);if(u<l){const M=1-u/l,C=Math.cos(u*.001)*M;s.cursor.vx+=Math.cos(t.a)*C*l*t.vs*65e-5,s.cursor.vy+=Math.sin(t.a)*C*l*t.vs*65e-5}s.cursor.vx+=(0-s.cursor.x)*.005,s.cursor.vy+=(0-s.cursor.y)*.005,s.cursor.vx*=.925,s.cursor.vy*=.925,s.cursor.x+=s.cursor.vx*2,s.cursor.y+=s.cursor.vy*2,s.cursor.x=Math.min(100,Math.max(-100,s.cursor.x)),s.cursor.y=Math.min(100,Math.max(-100,s.cursor.y))})}})}function E(o,a=!0){const r=o.x+o.wave.x+(a?o.cursor.x:0),h=o.y+o.wave.y+(a?o.cursor.y:0);return{x:Math.round(r*10)/10,y:Math.round(h*10)/10}}function B(){const{width:o,height:a}=i;if(!e)return;e.clearRect(0,0,o,a);let r=0;f.forEach(h=>{if(!e)return;e.beginPath(),e.strokeStyle=h.color,e.lineWidth=1.5;const w=Math.ceil((i.width+200)/h.xGap)+1;for(let y=0;y<w&&r<x.length;y++,r++){const s=x[r];if(!s||s.length===0||!e)continue;let d=E(s[0],!1);e.moveTo(d.x,d.y),s.forEach((g,m)=>{if(!e)return;const u=m===s.length-1;d=E(g,!u);const l=E(s[m+1]||s[s.length-1],!u);e.lineTo(d.x,d.y),u&&e.moveTo(l.x,l.y)})}e&&e.stroke()})}function P(o){t.sx+=(t.x-t.sx)*.1,t.sy+=(t.y-t.sy)*.1;const a=t.x-t.lx,r=t.y-t.ly,h=Math.hypot(a,r);t.v=h,t.vs+=(h-t.vs)*.1,t.vs=Math.min(100,t.vs),t.lx=t.x,t.ly=t.y,t.a=Math.atan2(r,a),A(o),B(),requestAnimationFrame(P)}function X(){L(),p()}function Y(o,a){const r=i;t.x=o-r.left,t.y=a-r.top,t.set||(t.sx=t.x,t.sy=t.y,t.lx=t.x,t.ly=t.y,t.set=!0)}function b(o){Y(o.clientX,o.clientY)}function z(o){const a=o.touches[0];Y(a.clientX,a.clientY)}return L(),p(),requestAnimationFrame(P),window.addEventListener("resize",X),window.addEventListener("mousemove",b),window.addEventListener("touchmove",z,{passive:!1}),()=>{window.removeEventListener("resize",X),window.removeEventListener("mousemove",b),window.removeEventListener("touchmove",z)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",S):S();
