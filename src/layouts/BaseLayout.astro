---
// BaseLayout.astro - Unified Base Layout
import Navigation from '../components/Navigation.astro';
import AnimatedBackground from '../components/AnimatedBackground.astro';

export interface Props {
  title: string;
  description?: string;
  image?: string;
  type?: 'website' | 'article';
  showFooter?: boolean;
}

const {
  title,
  description = "Xiaoyou Wu - Computer Engineering Student at Georgia Tech specializing in soft robotics, avionics, and embedded systems",
  image = "/assets/profile-image.jpg",
  type = "website",
  showFooter = true
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title}</title>
  <meta name="description" content={description}>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content={type}>
  <meta property="og:url" content={Astro.url}>
  <meta property="og:title" content={title}>
  <meta property="og:description" content={description}>
  <meta property="og:image" content={image}>

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content={Astro.url}>
  <meta property="twitter:title" content={title}>
  <meta property="twitter:description" content={description}>
  <meta property="twitter:image" content={image}>

  <!-- KaTeX CSS for Math Rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-cpW21h6RZv/5XBYEstVDL5aG2t0BonFGT" crossorigin="anonymous"></script>
  
  <!-- Google Fonts - Preserved Typography System -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Fira Code for code blocks -->
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}favicon.svg`}>
  
  <!-- Global CSS Import -->
  <style is:global>
    @import '../styles/global.css';
    @import '../styles/custom-overrides.css';
  </style>
</head>
<body>
  <Navigation />

  <main class="main-content">
    <slot />
  </main>

  {showFooter && (
    <footer class="site-footer">
      <div class="footer-content">
        <p>&copy; 2025 Xiaoyou Wu. All rights reserved.</p>
        <p>I create this website myself.</p>
        <div class="footer-links">
          <a href="https://github.com/Laurence-Wu" target="_blank" rel="noopener noreferrer">GitHub</a>
          <a href="https://linkedin.com/in/xiaoyou-wu" target="_blank" rel="noopener noreferrer">LinkedIn</a>
          <a href={`${import.meta.env.BASE_URL}resume.pdf`} target="_blank" rel="noopener noreferrer">Resume</a>
        </div>
      </div>
    </footer>
  )}


</body>
</html>

<style>
  /* Animations moved to global.css - removed duplication */

  /* Preserved global styling from legacy frontend */
  body {
    margin: 0;
    font-family: var(--font-body);
    background-color: var(--warm-neutral); /* #F4E9D8 - restored original background */
    color: var(--deep-navy); /* #2E3A59 - preserved */
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .main-content {
    min-height: calc(100vh - 160px); /* Account for navbar and footer */
    padding: var(--section-spacing) 0;
    padding-top: 0; /* Remove duplicate padding - handled by body padding */
    position: relative;
    z-index: 1;
  }

  .main-content > * {
    position: relative;
    z-index: 2;
  }

  /* Background animations now handled by AnimatedBackground component */

  .site-footer {
    background-color: var(--sage-green); /* Preserved sage green */
    color: rgb(255, 255, 255);
    padding: 1.5rem 0; /* Reduced padding for compactness */
    text-align: center;
    margin-top: 0; /* Remove top margin to close gap */
    font-family: var(--font-body);
    position: relative;
    z-index: 10; /* Ensure footer appears above moving grid background */
  }

  .footer-content {
    max-width: var(--content-max-width);
    margin: 0 auto;
    padding: 0 2rem;
  }

  .footer-content p {
    color: white;
    font-family: var(--font-body);
    margin-bottom: 1rem;
  }

  .footer-links {
    margin-top: 1rem;
    display: flex;
    justify-content: center;
    gap: 2rem;
  }

  .footer-links a {
    color: white;
    text-decoration: none;
    transition: var(--transition-standard);
    font-family: var(--font-body);
    font-weight: 500;
  }

  .footer-links a:hover {
    color: var(--gold-accent);
    transform: translateY(-2px);
  }

  .footer-links a::after {
    display: none; /* Remove the underline effect for footer links */
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .main-content {
      padding: 2rem 0;
      padding-top: 60px; /* Account for mobile navbar height */
    }

    .footer-links {
      flex-direction: column;
      gap: 1rem;
    }
  }

  @media (max-width: 480px) {
    .main-content {
      padding: 1.5rem 0;
      padding-top: 55px; /* Account for smaller mobile navbar */
    }

    .footer-content {
      padding: 0 1rem;
    }
  }

  @media (max-width: 360px) {
    .main-content {
      padding-top: 50px; /* Account for even smaller navbar */
    }
  }
</style> 